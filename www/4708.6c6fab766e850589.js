"use strict";(self.webpackChunkpetterinary=self.webpackChunkpetterinary||[]).push([[4708],{4708:(E,k,a)=>{a.r(k),a.d(k,{RegisterPageModule:()=>Y});var Z=a(6814),r=a(95),g=a(5958),P=a(5514),_=a(5861),e=a(5879),b=a(1482),T=a(7197),A=a(8662),C=a(9612),F=a(8720),y=a(7328);function M(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Email tidak boleh kosong dan harus format email."),e.qZA()())}function x(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Username tidak boleh kosong."),e.qZA()())}function q(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Alamat tidak boleh kosong."),e.qZA()())}function U(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Nomor telepon tidak boleh kosong."),e.qZA()())}function I(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Jenis kelamin tidak boleh kosong."),e.qZA()())}function N(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Latitude tidak boleh kosong"),e.qZA()())}function O(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Longitude tidak boleh kosong"),e.qZA()())}function R(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Password tidak boleh kosong dan harus 6 huruf."),e.qZA()())}function w(o,d){1&o&&(e.TgZ(0,"div")(1,"small",22),e._uU(2,"Konfirmasi password kosong atau tidak cocok."),e.qZA()())}const J=[{path:"",component:(()=>{class o{constructor(i,n,t,s,l,u,m,c){this.fb=i,this.router=n,this.route=t,this.loadingService=s,this.authService=l,this.geolocation=u,this.androidPermissions=m,this.platform=c,this.type="",this.title="Form Pendaftaran",this.isRincian=!1}form(){this.registerForm=this.fb.group({email:["",[r.kI.required,r.kI.email]],username:["",r.kI.required],alamat:["",r.kI.required],nomorTelepon:["",[r.kI.required,r.kI.pattern("^[0-9]+$")]],jenisKelamin:["",r.kI.required],password:["",[r.kI.required,r.kI.minLength(6)]],confirmPassword:["",r.kI.required],latitude:["",r.kI.required],longitude:["",r.kI.required]},{validator:this.mustMatch("password","confirmPassword")})}mustMatch(i,n){return t=>{const l=t.controls[n];l.errors&&!l.errors.mustMatch||l.setErrors(t.controls[i].value!==l.value?{mustMatch:!0}:null)}}getLocation(){this.platform.is("cordova")?this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION).then(i=>{i.hasPermission?this.getGeolocation():this.requestLocationPermission()}).catch(i=>{console.error("Error checking location permission:",i)}):this.getBrowserGeolocation()}getGeolocation(){this.geolocation.getCurrentPosition().then(i=>{this.registerForm.patchValue({latitude:i.coords.latitude,longitude:i.coords.longitude})}).catch(i=>{console.error("Error getting location:",i)})}requestLocationPermission(){this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION).then(i=>{i.hasPermission?this.getGeolocation():console.error("Location permission denied.")}).catch(i=>{console.error("Error requesting location permission:",i)})}getBrowserGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{this.registerForm.patchValue({latitude:i.coords.latitude,longitude:i.coords.longitude})},i=>{console.error("Error getting location:",i)},{enableHighAccuracy:!0}):console.error("Geolocation is not supported by this browser.")}submitRegister(){var i=this;return(0,_.Z)(function*(){if(i.registerForm.invalid)return void i.registerForm.markAllAsTouched();i.loadingService.present();const n=i.registerForm.value,t={email:n.email,password:n.password},s={username:n.username,address:n.alamat,phoneNumber:n.nomorTelepon,gender:n.jenisKelamin,lat:n.latitude.toString(),lng:n.longitude.toString()};try{yield i.authService.register(t.email,t.password,s).toPromise(),i.loadingService.dismiss(),i.router.navigate(["confirmation"],{queryParams:{status:"Register Berhasil",url:"login",text:"Login",type:"Check"}})}catch{i.loadingService.dismiss(),i.router.navigate(["confirmation"],{queryParams:{status:"Register Gagal",url:"login",text:"Login",type:"Fail"}})}})()}ngOnInit(){this.form(),this.route.queryParams.subscribe(i=>{this.type=i.type,"lihat"===this.type?(this.isRincian=!0,this.title="Rincian Profile"):(this.isRincian=!1,this.title="Form Pendaftaran")})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(r.qu),e.Y36(P.F0),e.Y36(P.gz),e.Y36(b.b),e.Y36(T.e),e.Y36(A.b),e.Y36(C.r),e.Y36(F.t4))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:60,vars:11,consts:[[1,"container"],[1,"bb-icon"],[3,"pageTitle"],[1,"form-register"],[3,"formGroup"],[1,"input-fields"],["position","stacked"],["formControlName","email","placeholder","Masukkan Email"],[4,"ngIf"],["formControlName","username","placeholder","Masukkan Username"],["formControlName","alamat","placeholder","Masukkan Alamat"],["formControlName","nomorTelepon","placeholder","Masukkan Nomor Telepon"],["formControlName","jenisKelamin","placeholder","Pilih jenis kelamin"],["value","Laki-laki"],["value","Perempuan"],["formControlName","latitude","placeholder","Latitude"],["formControlName","longitude","placeholder","Longitude"],["formControlName","password","type","password","placeholder","Masukkan Password"],["formControlName","confirmPassword","type","password","placeholder","Masukkan Konfirmasi Password"],[1,"form-aksi"],[1,"btn-aksi","btn-location",3,"click"],["type","submit",1,"btn-aksi","register",3,"click"],[1,"danger"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-back-button",2),e.qZA(),e.TgZ(3,"div",3)(4,"form",4)(5,"div",5)(6,"ion-item")(7,"ion-label",6),e._uU(8,"Email"),e.qZA(),e._UZ(9,"ion-input",7),e.YNc(10,M,3,0,"div",8),e.qZA(),e.TgZ(11,"ion-item")(12,"ion-label",6),e._uU(13,"Username"),e.qZA(),e._UZ(14,"ion-input",9),e.YNc(15,x,3,0,"div",8),e.qZA(),e.TgZ(16,"ion-item")(17,"ion-label",6),e._uU(18,"Alamat"),e.qZA(),e._UZ(19,"ion-textarea",10),e.YNc(20,q,3,0,"div",8),e.qZA(),e.TgZ(21,"ion-item")(22,"ion-label",6),e._uU(23,"Nomor Telepon"),e.qZA(),e._UZ(24,"ion-input",11),e.YNc(25,U,3,0,"div",8),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-label",6),e._uU(28,"Jenis kelamin"),e.qZA(),e.TgZ(29,"ion-select",12)(30,"ion-select-option",13),e._uU(31,"Laki-laki"),e.qZA(),e.TgZ(32,"ion-select-option",14),e._uU(33,"Perempuan"),e.qZA()(),e.YNc(34,I,3,0,"div",8),e.qZA(),e.TgZ(35,"ion-item")(36,"ion-label",6),e._uU(37,"Latitude"),e.qZA(),e._UZ(38,"ion-input",15),e.YNc(39,N,3,0,"div",8),e.qZA(),e.TgZ(40,"ion-item")(41,"ion-label",6),e._uU(42,"Longitude"),e.qZA(),e._UZ(43,"ion-input",16),e.YNc(44,O,3,0,"div",8),e.qZA(),e.TgZ(45,"ion-item")(46,"ion-label",6),e._uU(47,"Password"),e.qZA(),e._UZ(48,"ion-input",17),e.YNc(49,R,3,0,"div",8),e.qZA(),e.TgZ(50,"ion-item")(51,"ion-label",6),e._uU(52,"Konfirmasi Password"),e.qZA(),e._UZ(53,"ion-input",18),e.YNc(54,w,3,0,"div",8),e.qZA()()(),e.TgZ(55,"div",19)(56,"button",20),e.NdJ("click",function(){return t.getLocation()}),e._uU(57," Get Location "),e.qZA(),e.TgZ(58,"button",21),e.NdJ("click",function(){return t.submitRegister()}),e._uU(59," Register "),e.qZA()()()()),2&n){let s,l,u,m,c,p,f,h,v;e.xp6(2),e.Q6J("pageTitle",t.title),e.xp6(2),e.Q6J("formGroup",t.registerForm),e.xp6(6),e.Q6J("ngIf",(null==(s=t.registerForm.get("email"))?null:s.invalid)&&((null==(s=t.registerForm.get("email"))?null:s.dirty)||(null==(s=t.registerForm.get("email"))?null:s.touched))),e.xp6(5),e.Q6J("ngIf",(null==(l=t.registerForm.get("username"))?null:l.invalid)&&((null==(l=t.registerForm.get("username"))?null:l.dirty)||(null==(l=t.registerForm.get("username"))?null:l.touched))),e.xp6(5),e.Q6J("ngIf",(null==(u=t.registerForm.get("alamat"))?null:u.invalid)&&((null==(u=t.registerForm.get("alamat"))?null:u.dirty)||(null==(u=t.registerForm.get("alamat"))?null:u.touched))),e.xp6(5),e.Q6J("ngIf",(null==(m=t.registerForm.get("nomorTelepon"))?null:m.invalid)&&((null==(m=t.registerForm.get("nomorTelepon"))?null:m.dirty)||(null==(m=t.registerForm.get("nomorTelepon"))?null:m.touched))),e.xp6(9),e.Q6J("ngIf",(null==(c=t.registerForm.get("jenisKelamin"))?null:c.invalid)&&((null==(c=t.registerForm.get("jenisKelamin"))?null:c.dirty)||(null==(c=t.registerForm.get("jenisKelamin"))?null:c.touched))),e.xp6(5),e.Q6J("ngIf",(null==(p=t.registerForm.get("latitude"))?null:p.invalid)&&((null==(p=t.registerForm.get("latitude"))?null:p.dirty)||(null==(p=t.registerForm.get("latitude"))?null:p.touched))),e.xp6(5),e.Q6J("ngIf",(null==(f=t.registerForm.get("longitude"))?null:f.invalid)&&((null==(f=t.registerForm.get("longitude"))?null:f.dirty)||(null==(f=t.registerForm.get("longitude"))?null:f.touched))),e.xp6(5),e.Q6J("ngIf",(null==(h=t.registerForm.get("password"))?null:h.invalid)&&((null==(h=t.registerForm.get("password"))?null:h.dirty)||(null==(h=t.registerForm.get("password"))?null:h.touched))),e.xp6(5),e.Q6J("ngIf",(null==(v=t.registerForm.get("confirmPassword"))?null:v.invalid)&&((null==(v=t.registerForm.get("confirmPassword"))?null:v.dirty)||(null==(v=t.registerForm.get("confirmPassword"))?null:v.touched)))}},dependencies:[Z.O5,r._Y,r.JJ,r.JL,g.pK,g.Ie,g.Q$,g.t9,g.n0,g.g2,g.QI,g.j9,y.W,r.sg,r.u],styles:["ion-item[_ngcontent-%COMP%]{background:transparent;--inner-padding-end: 0;--inner-border-width: 0;--padding-start: 0px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:10px!important;margin-left:3px!important;margin-top:3px!important;font-size:18px;opacity:1!important}ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background: #ffffff;border-radius:7px;border:1px solid #dedede;padding:10px;font-size:14px;--padding-top: 0}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: 7px;--padding-top: 6px !important;--padding-bottom: 6px !important;--padding-end: 8px !important;--padding-start: 8px !important;font-size:14px;border:1px solid #dedede;border-radius:7px}ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{padding-left:8px;background:#fff;border:1px solid #dedede;border-radius:7px;font-weight:500;font-size:14px;color:#000}.btn-aksi[_ngcontent-%COMP%]{padding:10px 20px;width:100px;border-radius:10px;color:#fff}.danger[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.container[_ngcontent-%COMP%]{overflow:auto;margin-left:10px;margin-right:10px;margin-bottom:20px;height:100%;display:flex;flex-direction:column}.bottom-gap[_ngcontent-%COMP%]{padding:54px 0}.form-register[_ngcontent-%COMP%]{padding:10px;border:1px solid #9c9c9c;border-radius:20px;width:100%;flex:1;display:flex;flex-direction:column;justify-content:space-between}.form-register[_ngcontent-%COMP%]   .form-aksi[_ngcontent-%COMP%]{width:100%;margin-top:40px;margin-bottom:10px;display:flex;justify-content:end;gap:20px}.form-register[_ngcontent-%COMP%]   .form-aksi[_ngcontent-%COMP%]   .btn-location[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.form-register[_ngcontent-%COMP%]   .form-aksi[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{background-color:#8791e5}"]})}return o})()}];let L=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[P.Bz.forChild(J),P.Bz]})}return o})();var S=a(8339);let Y=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[Z.ez,r.u5,g.Pc,S.N,L,r.UX]})}return o})()}}]);